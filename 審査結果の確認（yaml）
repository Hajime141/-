flow_steps:
  - id: "step_審査結果の確認"
    description: "本人確認完了後の挨拶を行い、保留中にSalesforceにて顧客の年齢およびローン審査結果を確認して、適切な案内フローへ振り分ける。"
    instruction:
      - "まず、お客様に本人確認が完了した旨を伝え、受付状況確認のために保留にする。"
      - "保留中操作: shared_data_pool.is_oral_auth（口頭認証実施フラグ）がTrueの場合、Salesforceの顧客基本情報画面にて『【口頭認証】基本認証』にチェックを入れる。"
      - "保留中操作: Function `check_loan_exam_status` を実行し、Salesforce上の年齢および審査ステータスを取得・判定する。"
      - "Functionの判定結果に基づき、以下の4パターンのいずれかに遷移する。"
      - "1. 申込可能年齢外（20歳未満または70歳以上）"
      - "2. 審査中 または 本人確認OK"
      - "3. 審査OK"
      - "4. 審査NG または 反社NG"
    tools:
      - name: "check_loan_exam_status"
        arguments:
          customer_id: "shared_data_pool.customer_id"
    operator:
      - "ありがとうございます。ご本人さまの確認が取れました。"
      - "それでは受付状況を確認いたしますので、少々お待ちくださいませ。"
    transitions:
      - next_step: "step_審査結果案内1"
        condition: "function_result.status_category == 'age_invalid'"
      - next_step: "step_審査結果案内2"
        condition: "function_result.status_category == 'processing_or_id_ok'"
      - next_step: "step_審査結果案内3"
        condition: "function_result.status_category == 'exam_ok'"
      - next_step: "step_審査結果案内4"
        condition: "function_result.status_category == 'exam_ng'"
